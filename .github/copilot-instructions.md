# GitHub Copilot â€“ Repository Instructions

These instructions apply to Copilot **code reviewer** suggestions for this repository. Follow GitHub's guidance on repository instructions to keep feedback aligned with team practices.

## Project context
- Go + Bubble Tea TUI (`cmd/aprd`, `internal/tui`, `internal/runner`, `internal/config`).
- Python automation lives in `tools/auto_prd`; `tools/auto_prd_to_pr_v3.py` is the entrypoint that invokes this package.
- Binaries belong in `bin/` and are generated via `make build`; never commit anything under `bin/`.

## Review expectations
1. **Go style & tooling**
   - Enforce `go fmt ./...` + `goimports` ordering before approving.
   - Run `make tidy` when dependencies change; reject PRs that leave `go.mod` / `go.sum` dirty.
   - Require `make ci` (currently `go test ./...`) and call out missing or failing tests.
2. **Python automation**
   - Keep `tools/auto_prd` side-effect free and thoroughly unit tested. Prefer table-driven tests for model/state updates and mock external commands through interfaces in `internal/runner`.
   - Guard every CLI invocation with the safety utilities in `tools/auto_prd/command.py` and reject any direct `subprocess` calls in new code.
3. **Configuration & UX**
   - `internal/config` is the single source of truth for CLI flags and persisted settings; ensure new flags are surfaced through the TUI settings panel and documented.
   - The TUI must stay responsive; review for blocking calls on the UI thread.
4. **Automation safety**
   - Autogenerated branches follow `codex/<slug>-<timestamp>`; reviewers should ensure the automation cleans up temp branches and pycache noise before merge.
   - PR bodies/titles must be shell-safe; flag any use of un-scrubbed strings in `gh` commands.
5. **Documentation & process**
   - Require Conventional Commits (e.g., `feat:`, `fix:`) and PR descriptions that mention testing evidence (`go test`, `make run`, etc.).
   - When UI/UX changes, ask for screenshots or terminal captures and highlight any new env vars.

## Reviewer reminders
- Prefer actionable findings ordered by severity; keep summaries short once issues are listed.
- Note known commands from the runbook: `make build`, `make run`, `make tidy`, `codacy-cli analyze --fix`.
- If Copilot is unsure, it should request clarification instead of speculating.
